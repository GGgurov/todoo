<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create</title>
    <link rel="stylesheet" href="../css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300..700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- меню -->
    <img id="close-menu" class="menu-img" src="../img/close.png" alt="close">
    <nav id="menu" class="menu">
        <div class="menu-label">
            <p>Меню</p>
        </div>

            <div class="menu-buttons">
            <a class="menu-button" href="../index.html">Список задач</a>
            <a class="menu-button-1" href="../html/create.html">+ Новая задача</a>
        </div>
    </nav>

    <main class="create-main">


        <div class="create">
            <h1>Создание задачи</h1>
            <div class="line"></div>
            <div class="create-container">

                <input id="name" class="name" value="Название..." type="text">
                <div class="create-line"> </div>


                <button id="pickdate" class="pickdate">Выбрать дату</button>
                <div id="modal" class="date-modal">
                    <input id="datepick" class="datepick" type="date">
                </div>
                <input id="disc" class="disc" value="Описание..." type="text">

                <button type="button" id="createbutton" class="create-button">Создать</button>
            </div>
        </div>
        



    </main>
        
    


<script> 
    document.getElementById("createbutton").addEventListener("click", () => {
    const name = document.getElementById("name").value.trim();
    const description = document.getElementById("disc").value.trim();
    const date = document.getElementById("datepick").value;

    if (!name || !description || !date) {
        alert("Заполни все поля!");
        return;
    }

    const task = {
        name,
        description,
        date
    };

    // получаем текущие задачи или создаём пустой массив
    const tasks = JSON.parse(localStorage.getItem("tasks")) || [];

    // добавляем новую
    tasks.push(task);

    // сохраняем обратно
    localStorage.setItem("tasks", JSON.stringify(tasks));

    // перенаправляем на страницу со списком задач
    window.location.href = "../index.html"; // путь подставь свой
});


// Визуал
const input = document.getElementById('name');
const originalText = 'Название...';

input.addEventListener('focus', () => {
    if (input.value === originalText) input.value = '';
});

input.addEventListener('blur', () => {
    if (input.value.trim() === '') input.value = originalText;
});



const disc = document.getElementById('disc');
const originalText2 = 'Описание...';

disc.addEventListener('focus', () => {
    if (disc.value === originalText2) disc.value = '';
});

disc.addEventListener('blur', () => {
    if (disc.value.trim() === '') disc.value = originalText2;
});



const pickdate = document.getElementById(`pickdate`)
const modal = document.getElementById(`modal`)
let dur = 0
    pickdate.addEventListener(`click`, () => {
        if (dur == 0) {
            modal.style.display = `flex`
            dur = 1
        } else {
            modal.style.display = `none`
            dur = 0
        }
    })

    document.addEventListener('DOMContentLoaded', () => {
    const closemenu = document.getElementById('close-menu');
    const menu = document.getElementById('menu');

    closemenu.addEventListener('click', () => {
        menu.classList.toggle('open');

        if (menu.classList.contains('open')) {
            closemenu.style.transform = 'rotate(0deg)';
        } else {
            closemenu.style.transform = 'rotate(180deg)';
        }
    });
});
</script>
</body>
</html>